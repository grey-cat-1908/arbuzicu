$$ m_{1}\vec{v}_{1} + m_{2}\vec{v}_{2} = m_{1}\vec{v'}_{1} + m_{2}\vec{v'}_{2} $$

$$ \frac{m_{1}{v_{1}}^2}{2} + \frac{m_{2}{v_{2}}^2}{2} = \frac{m_{1}{v'_{1}}^2}{2} + \frac{m_{2}{v'_{2}}^2}{2} $$

$$ \left\{
\begin{array}{lr}
m_{1}({v_{1}} - {v'_{1}}) = m_{2}({v'_{2}} - {v_{2}})\\
m_{1}({v_{1}}^2 - {v'_{1}}^2) = m_{2}({v'_{2}}^2 - {v_{2}}^2)
\end{array}
\right. $$

$$ \frac{v_{1} - v'_{1}}{{v_{1}^2} - {v'_{1}}^2} = \frac{v'_{2} - v_{2}}{{{v'_{2}}^2} - {v_{2}}^2} $$

$$ \frac{v_{1} - v'_{1}}{(v_1 + v'_1)(v_1 - v'_1)} = \frac{v'_{2} - v_{2}}{(v'_2 - v_2)(v'_2 + v_2)} $$

$$ \frac{1}{v_1 + v'_1} = \frac{1}{v'_2 + v_2} $$

$$ v_1 + v'_1 = v'_2 + v_2 $$

$$ \left\{
\begin{array}{lr}
v'_1 = v_2 + v'_2 - v_1\\
v'_2 = v_1 + v'_1 - v_2
\end{array}
\right. $$

$$ \left\{
\begin{array}{lr}
m_1v_1 + m_2v_2 = m_1{v'}_1 + m_2(v_1 + {v'}_1 - v_2)\\
m_1v_1 + m_2v_2 = m_1(v_2 + v'_2 - v_1) + m_2v'_2
\end{array}
\right. $$

$$ \left\{
\begin{array}{lr}
v'_1 = \frac{2m_2v_2 + v_1(m_1-m_2)}{m_1+m_2}\\
v'_2 = \frac{2m_1v_1 + v_2(m_2-m_1)}{m_1+m_2}
\end{array}
\right. $$
